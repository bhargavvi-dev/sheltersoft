CKEDITOR.plugins.add("texttransform",{lang:"en,tr",init:function(e){var t=0;e.addCommand("transformTextSwitch",{exec:function(){var a=e.getSelection(),n=["transformTextToUppercase","transformTextToLowercase","transformTextCapitalize"];a.getSelectedText().length>0&&(a.lock(),e.execCommand(n[t]),a.unlock(!0),t<n.length-1?t++:t=0)}}),e.addCommand("transformTextToUppercase",{exec:function(){var t=e.getSelection();if(t.getSelectedText().length>0)for(var a,n=t.getRanges(),o=new CKEDITOR.dom.walker(n[0]);a=o.next();)a.type==CKEDITOR.NODE_TEXT&&a.getText()&&("tr"==e.langCode?a.$.textContent=a.$.textContent.trToUpperCase():a.$.textContent=a.$.textContent.toLocaleUpperCase())}}),e.addCommand("transformTextToLowercase",{exec:function(){var t=e.getSelection();if(t.getSelectedText().length>0)for(var a,n=t.getRanges(),o=new CKEDITOR.dom.walker(n[0]);a=o.next();)a.type==CKEDITOR.NODE_TEXT&&a.getText()&&("tr"==e.langCode?a.$.textContent=a.$.textContent.trToLowerCase():a.$.textContent=a.$.textContent.toLocaleLowerCase())}}),e.addCommand("transformTextCapitalize",{exec:function(){var t=e.getSelection();if(t.getSelectedText().length>0)for(var a,n=t.getRanges(),o=new CKEDITOR.dom.walker(n[0]);a=o.next();)a.type==CKEDITOR.NODE_TEXT&&a.getText()&&(a.$.textContent=a.$.textContent.replace(/[^\s]\S*/g,function(t){return"tr"==e.langCode?t.charAt(0).trToUpperCase()+t.substr(1).trToLowerCase():t.charAt(0).toLocaleUpperCase()+t.substr(1).toLocaleLowerCase()}))}}),e.ui.addButton("TransformTextSwitcher",{label:e.lang.texttransform.transformTextSwitchLabel,command:"transformTextSwitch",icon:this.path+"images/transformSwitcher.png"}),e.ui.addButton("TransformTextToLowercase",{label:e.lang.texttransform.transformTextToLowercaseLabel,command:"transformTextToLowercase",icon:this.path+"images/transformToLower.png"}),e.ui.addButton("TransformTextToUppercase",{label:e.lang.texttransform.transformTextToUppercaseLabel,command:"transformTextToUppercase",icon:this.path+"images/transformToUpper.png"}),e.ui.addButton("TransformTextCapitalize",{label:e.lang.texttransform.transformTextCapitalizeLabel,command:"transformTextCapitalize",icon:this.path+"images/transformCapitalize.png"})}});